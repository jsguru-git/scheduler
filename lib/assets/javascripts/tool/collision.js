(function(a){function b(a,b){if(!a){this.x1=this.y1=this.x2=this.y2=0;this.proto=null}else if("offset"in a){var c=a.data("jquery-collision-coordinates");if(c){this.x1=c.x1;this.y1=c.y1;this.x2=c.x2;this.y2=c.y2}else if(b&&b.length&&b.length>=4){this.x1=b[0];this.y1=b[1];this.x2=b[2]+a.outerWidth(true);this.y2=b[3]+a.outerHeight(true)}else if(a.parent().length<=0){this.x1=parseInt(a.css("left"))||0;this.y1=parseInt(a.css("top"))||0;this.x2=parseInt(a.css("width"))||0;this.y2=parseInt(a.css("height"))||0;this.x2+=this.x1;this.x2+=(parseInt(a.css("margin-left"))||0)+(parseInt(a.css("border-left"))||0)+(parseInt(a.css("padding-left"))||0)+(parseInt(a.css("padding-right"))||0)+(parseInt(a.css("border-right"))||0)+(parseInt(a.css("margin-right"))||0);this.y2+=this.y1;this.y2+=(parseInt(a.css("margin-top"))||0)+(parseInt(a.css("border-top"))||0)+(parseInt(a.css("padding-top"))||0)+(parseInt(a.css("padding-bottom"))||0)+(parseInt(a.css("border-bottom"))||0)+(parseInt(a.css("margin-bottom"))||0)}else{var d=a.offset();this.x1=d.left-(parseInt(a.css("margin-left"))||0);this.y1=d.top-(parseInt(a.css("margin-top"))||0);this.x2=this.x1+a.outerWidth(true);this.y2=this.y1+a.outerHeight(true)}this.proto=a}else if("x1"in a){this.x1=a.x1;this.y1=a.y1;this.x2=a.x2;this.y2=a.y2;this.proto=a}if("dir"in a){this.dir=a.dir}}function d(a,b,c,d){this.target=a;this.obstacle=b;this.overlap=c;this.overlapType=d}function e(a,b,c){this.targets=a;this.obstacles=b;this.collisions=null;this.cache=null;if(c)this.containment=c;else this.containment=null}function f(c){return a(c).get().map(function(c,d,e){return new b(a(c))})}function g(b){var c=a();for(var d=0;d<b.length;d++){c=c.add(b[d])}return c}b.prototype.innerContainer=function(){var a=new b(this);if(this.proto["css"]){a.x1+=parseInt(this.proto.css("margin-left"))||0;a.x1+=parseInt(this.proto.css("border-left"))||0;a.x1+=parseInt(this.proto.css("padding-left"))||0;a.x2-=parseInt(this.proto.css("padding-right"))||0;a.x2-=parseInt(this.proto.css("border-right"))||0;a.x2-=parseInt(this.proto.css("margin-right"))||0;a.y1+=parseInt(this.proto.css("margin-top"))||0;a.y1+=parseInt(this.proto.css("border-top"))||0;a.y1+=parseInt(this.proto.css("padding-top"))||0;a.y2-=parseInt(this.proto.css("padding-bottom"))||0;a.y2-=parseInt(this.proto.css("border-bottom"))||0;a.y2-=parseInt(this.proto.css("margin-bottom"))||0}return a};b.prototype.move=function(a,b){this.x1+=a;this.x2+=a;this.y1+=b;this.y2+=b;return this};b.prototype.update=function(a){if("x1"in a)this.x1=a["x1"];if("x2"in a)this.x1=a["x2"];if("y1"in a)this.x1=a["y1"];if("y2"in a)this.x1=a["y2"];if("left"in a){var b=this.x2-this.x1;this.x1=a["left"];this.x2=this.x1+b}if("top"in a){var c=this.y2-this.y1;this.y1=a["top"];this.y2=this.y1+c}if("offset"in a){var d=a.offset();this.update(d);this.x2=this.x1+a.width();this.y2=this.y1+a.height()}if("dir"in a)this.x1=a["dir"];return this};b.prototype.width=function(){return this.x2-this.x1};b.prototype.height=function(){return this.y2-this.y1};b.prototype.centerx=function(){return(this.x1+this.x2)/2};b.prototype.centery=function(){return(this.y1+this.y2)/2};b.prototype.toString=function(){return(this.proto["get"]?"#"+this.proto.get(0).id:"")+"["+[this.x1,this.y1,this.x2,this.y2].join(",")+"]"};b.EPSILON=.001;b.prototype.containsPoint=function(a,c,d){if(!d)d=false;var e=(d?-1:+1)*b.EPSILON;if(a>this.x1+e&&a<this.x2-e&&c>this.y1+e&&c<this.y2-e)return true;else return false};b.prototype.overlaps=function(a,b){var c=this._overlaps(a,b);if(c.length>0)return c;c=a._overlaps(this,b);if(c.length>0){c[0].dir=c[0].dir=="Inside"?"Outside":c[0].dir=="Outside"?"Inside":c[0].dir=="N"?"S":c[0].dir=="S"?"N":c[0].dir=="W"?"E":c[0].dir=="E"?"W":c[0].dir=="NE"?"SW":c[0].dir=="SW"?"NE":c[0].dir=="SE"?"NW":c[0].dir=="NW"?"SE":undefined}return c||[]};b.prototype._overlaps=function(a,c){var d=a;var e=this;if(!c)c=false;var f=d.centerx();var g=d.centery();var h=[[d.x1,d.y1,"SE"],[d.x2,d.y1,"SW"],[d.x2,d.y2,"NW"],[d.x1,d.y2,"NE"],[f,d.y1,"S"],[d.x2,g,"W"],[f,d.y2,"N"],[d.x1,g,"E"],[f,g,undefined]];var i=null;var j={NW:false,N:false,NE:false,E:false,SE:false,S:false,SW:false,W:false};for(var k=0;k<h.length;k++){if(this.containsPoint(h[k][0],h[k][1],c)){if(h[k][2])j[h[k][2]]=true;if(i)continue;i=[new b({x1:Math.max(d.x1,e.x1),y1:Math.max(d.y1,e.y1),x2:Math.min(d.x2,e.x2),y2:Math.min(d.y2,e.y2),dir:h[k][2]})]}}if(i){if(j["NW"]&&j["NE"])i[0].dir="N";if(j["NE"]&&j["SE"])i[0].dir="E";if(j["SE"]&&j["SW"])i[0].dir="S";if(j["SW"]&&j["NW"])i[0].dir="W";if(j["NW"]&&j["NE"]&&j["SE"]&&j["SW"])i[0].dir="Outside";if(!j["NW"]&&!j["NE"]&&!j["SE"]&&!j["SW"]&&!j["N"]&&!j["E"]&&!j["S"]&&!j["W"])i[0].dir="Inside"}return i||[]};b.prototype._protrusion=function(a,c,d){var e=this.overlaps(new b(a),false);if(e.length<=0)return d;e[0].dir=c;d.push(e[0]);return d};b.prototype.protrusions=function(a){var b=[];var c=Number.NEGATIVE_INFINITY;var d=Number.POSITIVE_INFINITY;var e=a.x1;var f=a.x2;var g=a.y1;var h=a.y2;b=this._protrusion({x1:e,y1:c,x2:f,y2:g},"N",b);b=this._protrusion({x1:f,y1:c,x2:d,y2:g},"NE",b);b=this._protrusion({x1:f,y1:g,x2:d,y2:h},"E",b);b=this._protrusion({x1:f,y1:h,x2:d,y2:d},"SE",b);b=this._protrusion({x1:e,y1:h,x2:f,y2:d},"S",b);b=this._protrusion({x1:c,y1:h,x2:e,y2:d},"SW",b);b=this._protrusion({x1:c,y1:g,x2:e,y2:h},"W",b);b=this._protrusion({x1:c,y1:c,x2:e,y2:g},"NW",b);return b};d.prototype.distance=function(a){var b=c.target;var d=c.overlap;return Math.sqrt((b.centerx()-d.centerx())*(b.centerx()-d.centerx())+(b.centery()-d.centery())*(b.centery()-d.centery()))};e.prototype.getCollisions=function(a){if(this.collisions!==null)return this.collisions;this.cache={};this.collisions=[];if(!a)a="collision";if(a!="collision"&&a!="protrusion")return[];var b=[];var c=this.targets;var e=this.obstacles;for(var f=0;f<c.length;f++){var g=c[f];for(var h=0;h<e.length;h++){var i=e[h];var j=a=="collision"?g.overlaps(i):g.protrusions(i.innerContainer());for(var k=0;k<j.length;k++){b.push(new d(c[f],e[h],j[k],a))}}}this.collisions=b;return b};a.fn.collision=function(b,c){if(!c)c={};var d="collision";var h=null;var i=null;var j=null;var k=null;var l="body";if(c.mode=="protrusion")d=c.mode;if(c.as)h=c.as;if(c.colliderData)i=c.colliderData;if(c.obstacleData)j=c.obstacleData;if(c.directionData)k=c.directionData;if(c.relative)l=c.relative;var m=new e(f(this),f(b));var n=m.getCollisions(d);var o;if(!h)o=n.map(function(a,b,c){return a.obstacle.proto});else o=n.map(function(b,c,d){var e=b.overlap.x1;var f=b.overlap.y1;if(l&&l!="body"){var g=l=="collider"?a(b.target.proto):l=="obstacle"?a(b.obstacle.proto):a(l);if(g.length>0){var m=g.offset();e-=m.left;f-=m.top}}var n=a(h).offset({left:e,top:f}).width(b.overlap.width()).height(b.overlap.height());if(i)n.data(i,a(b.target.proto));if(j)n.data(j,a(b.obstacle.proto));if(k&&b.overlap.dir)n.data(k,b.overlap.dir);return n});return g(o)}})(jQuery);(function(a){function d(a,b,c,d,e){jQuery.Event.call(this,a);this.collider=b;this.obstacle=c;this.collisionType=d;this.collision=e}function e(a,b,c,d){jQuery.Event.call(this,a);this.collider=b;this.obstacle=c;this.collisionType=d}function f(a,b,c,d){this.x1=a;this.y1=b;this.x2=c;this.y2=d}function g(a){if(a.length<=0)return null;var b=0;var c=0;var d=0;for(var e=0;e<a.length;e++){d+=a[e].area();b+=a[e].centerx()*a[e].area();c+=a[e].centery()*a[e].area()}var g=Math.sqrt(d);return new f(b/d-g/2,c/d-g/2,b/d+g/2,c/d+g/2)}function h(a,b,c){if(!b)b=0;if(!c)c=0;if(a.parent().length>0){var d=b+a.offset().left-(parseInt(a.css("margin-left"))||0);var e=c+a.offset().top-(parseInt(a.css("margin-top"))||0);var g=d+a.outerWidth(true);var h=e+a.outerHeight(true)}else{var d=b+parseInt(a.css("left"))||0;var e=c+parseInt(a.css("top"))||0;var g=d+parseInt(a.css("width"))||0;var h=e+parseInt(a.css("height"))||0;g+=(parseInt(a.css("margin-left"))||0)+(parseInt(a.css("border-left"))||0)+(parseInt(a.css("padding-left"))||0)+(parseInt(a.css("padding-right"))||0)+(parseInt(a.css("border-right"))||0)+(parseInt(a.css("margin-right"))||0);h+=(parseInt(a.css("margin-top"))||0)+(parseInt(a.css("border-top"))||0)+(parseInt(a.css("padding-top"))||0)+(parseInt(a.css("padding-bottom"))||0)+(parseInt(a.css("border-bottom"))||0)+(parseInt(a.css("margin-bottom"))||0)}return new f(d,e,g,h)}function i(b,c,d){return g(b.toArray().map(function(b,e,f){return h(a(b),c,d)}))}function j(b,c,d,e,f,g,j,k,l,m){if(!k)k=i(a(this.collider),f,g);if(!f)f=0;if(!g)g=0;this.collision=a(b);this.collider=a(b.data(c));this.obstacle=a(b.data(d));this.direction=b.data(j);this.type=e;this.dx=f;this.dy=g;this.centerOfMass=k;this.collisionCoords=h(this.collision);this.colliderCoords=h(this.collider,f,g);this.obstacleCoords=h(this.obstacle);if(!l)l=this.colliderCoords.centerx();if(!m)l=this.colliderCoords.centery();this.mousex=l;this.mousey=m}function k(a,b){var c=a.distance();var d=b.distance();return c<d?-1:c>d?+1:0}function l(b,c){this.draggable=a(b);this.obstacleSelector=c.obstacle||".ui-draggable-collision-obstacle";this.restraintSelector=c.restraint||".ui-draggable-collision-restraint";this.obstacle=a(c.obstacle||".ui-draggable-collision-obstacle");this.restraint=a(c.restraint||".ui-draggable-collision-restraint");var d=c.collider||".ui-draggable-dragging";this.collider=b.find(d).andSelf().filter(d);this.colliderData=c.colliderData||null;this.obstacleData=c.obstacleData||null;this.directionData=c.directionData||null;this.relative=c.relative||"body";this.preventCollision=c.preventCollision||false;this.preventProtrusion=c.preventProtrusion||false;this.collisions=a();this.protrusions=a()}function m(b,c,d,e,f){a.ui.plugin.call(c,d,e,f);b.trigger(e,f)}function n(b,c,d){var e=a(this).data("draggable");var f=e.options}function o(b,d){c=a(this).data("draggable").options.collisionVisualDebug;a(this).data("jquery-ui-draggable-collision-recent-position",d.originalPosition)}function p(d,e){a(this).removeData("jquery-ui-draggable-collision-recent-position");if(c)a(".testdebug").remove();c=b}function q(f,g){var k=a(this).data("jquery-ui-draggable-collision-recent-position");if(b){console.log("handleCollision ******************************************************************")}if(c)a(".testdebug").remove();var n="collision";var o="precollision";var p="postcollision";var q="protrusion";var s="preprotrusion";var t="postprotrusion";var u=a(this).data("draggable");var v=u.options;var w=[];if(v.obstacle||v.restraint)w.push(new l(a(this),v));if(v.multipleCollisionInteractions&&v.multipleCollisionInteractions["length"]){var x=v.multipleCollisionInteractions;for(var y=0;y<x.length;y++)w.push(new l(a(this),x[y]))}if(w.length<=0){a(this).data("jquery-ui-draggable-collision-recent-position",g.position);return}var z="ui-draggable-collision-collider-temp";var A="ui-draggable-collision-obstacle-temp";var B="ui-draggable-collision-direction-temp";var C="ui-draggable-collision-interaction-temp";var D=f.data;var E="<div />";if(D&&D.as)E=D.as;var F;var G=1;for(var y=0;y<w.length;y++){G+=2*w[y].collider.length*(w[y].obstacle.length+w[y].restraint.length);if(c){w[y].obstacle.each(function(){a(this).clone().removeClass().empty().addClass("testdebug").css("pointer-events","none").css("background","transparent").css("padding","0px").css("border","1px solid black").css("margin","-1px").appendTo(a(this).parent())});w[y].restraint.each(function(){a(this).clone().removeClass().empty().addClass("testdebug").css("pointer-events","none").css("background","transparent").css("padding","0px").css("border","1px solid magenta").css("margin","-1px").appendTo(a(this).parent())})}if(w[y].obstacleSelector){F=new e(o,a(this),w[y].obstacle,n);m(w[y].collider,u,o,F,g)}if(w[y].restraintSelector){F=new e(s,a(this),w[y].restraint,q);m(w[y].collider,u,s,F,g)}}var H=k.left;var I=k.top;var J=g.position.left-k.left;var K=g.position.top-k.top;var L;var M;var N=[];var O=[];var P=[];var Q=[];var R=a();if(u.containment){G+=2;var S=u.containment;R=a("<div />").offset({left:S[0],top:S[1]}).width(S[2]-S[0]+a(this).width()).height(S[3]-S[1]+a(this).height());if(c)R.clone().css("background","transparent").css("border","1px solid blue").css("margin","-1px").css("padding","0px").addClass("testdebug").appendTo()}var T={};var U=0;while(U<G){U++;L=g.position.left-k.left;M=g.position.top-k.top;N=[];O=[];P=[];for(var y=0;y<w.length;y++){w[y].collisions=a();w[y].protrusions=a();var V=w[y].collider;var W=w[y].obstacle;var X=w[y].restraint;if(b)console.log("trying inter,c,o,r=",w[y],V,W,X);V.each(function(){a(this).data("jquery-collision-coordinates",h(a(this),L,M))});var Y=i(V);for(var Z=0;Z<V.length;Z++){var _=a(V[Z]).collision(W,{mode:"collision",as:"<div />",colliderData:z,obstacleData:A,directionData:B,relative:"body"});if(b){console.log("collisions",_)}_.data(C,w[y]);w[y].collisions=w[y].collisions.add(_);if(_.length>0){O=_.toArray().map(function(b,c,d){return new j(a(b),z,A,"collision",L,M,B,Y,f.pageX,f.pageY)});N=N.concat(O);if(c)a("<span>c"+U+"</span>").appendTo(_.addClass("testdebug").css("position","absolute").css("padding","0px").css("border","1px solid black").css("margin","-1").appendTo("body"))}_=a(V[Z]).collision(X,{mode:"protrusion",as:"<div />",colliderData:z,obstacleData:A,directionData:B,relative:"body"});if(b){console.log("protrusions",_)}_.data(C,w[y]);w[y].protrusions=w[y].protrusions.add(_);if(_.length>0){P=_.toArray().map(function(b,c,d){return new j(a(b),z,A,"protrusion",L,M,B,Y,f.pageX,f.pageY)});N=N.concat(P);if(c)a("<span>p"+U+"</span>").appendTo(_.addClass("testdebug").css("position","absolute").css("padding","0px").css("border","1px solid magenta").css("margin","-1").appendTo("body"))}}V.each(function(){a(this).removeData("jquery-collision-coordinates")})}if(u.containment){a(this).each(function(){a(this).data("jquery-collision-coordinates",h(a(this),L,M))});var ab=a(this).collision(R,{mode:"protrusion",as:"<div />",colliderData:z,obstacleData:A,directionData:B,relative:"body"});Q=ab.toArray().map(function(b,c,d){return new j(a(b),z,A,"protrusion",L,M,B,i(V),f.pageX,f.pageY)});if(c)a("<span>x"+U+"</span>").appendTo(ab.addClass("testdebug").css("position","absolute").css("padding","0px").css("border","1px solid blue").css("margin","-1").appendTo("body"));a(this).each(function(){a(this).removeData("jquery-collision-coordinates")})}if(b)console.log("checking if we have any collisions at all...");if(O.length<=0&&P.length<=0&&Q.length<=0)break;var bb=true;for(var y=0;y<w.length;y++){if(b)console.log("checking adjustments for",w[y],"ccl=",Q,"pc,cl,pp,pl=",w[y].preventCollision,w[y].collisions.length,w[y].preventProtrusion,w[y].protrusions.length);if(b)console.log("checking if we overstepped our containment...");if(!w[y].preventCollision&&!w[y].preventProtrusion&&Q.length>0){if(b){console.log("not trying to prevent anything, but jumped our containment",w[y])}bb=false}if(b)console.log("checking if we want to block something we have collided with...");if(w[y].preventCollision&&(w[y].collisions.length>0||Q.length>0)||w[y].preventProtrusion&&(w[y].protrusions.length>0||Q.length>0)){if(b){console.log("trying to prevent something that we're still hitting",w[y])}bb=false}}if(bb){if(b){console.log("done adjusting")}break}if(b)console.log("calculating delta with ocl,ccl=",N,Q);var D=r(N.concat(),Q,T);if(b)console.log("dx=",D.dx,"dy=",D.dy);if(D.dx==0&&D.dy==0)break;g.position.left+=D.dx;g.position.top+=D.dy}L=g.position.left-k.left;M=g.position.top-k.top;if(U>G||Q.length>0||v.preventProtrusion&&P.length>0||v.preventCollision&&O.length>0){if(b)console.log("reverting, i=",U,"maxiter=",G,"cocl=",O,"cocl.len=",O.length,"pocl=",P,"pocl.len=",P.length,"ccl=",Q,"ccl.len=",Q.length,"origdx=",J,"origdy=",K,"dx=",L,"dy=",M);g.position.left=H;g.position.top=I}for(var Z=0;Z<N.length;Z++){var _=N[Z];for(var cb=0;cb<_.collision.length;cb++){var db=a(_.collision[cb]);var eb=a(db.data(z));var fb=a(db.data(A));var gb=db.data(B);var hb=db.data(C);db.removeData(z).removeData(A).removeData(B).removeData(C);if(hb.colliderData)db.data(hb.colliderData,eb);if(hb.obstacleData)db.data(hb.obstacleData,fb);if(gb&&hb.directionData)db.data(hb.directionData,gb);if(hb.relative&&hb.relative!="body"){var ib=db.offset();var jb=hb.relative=="collider"?eb:hb.relative=="obstacle"?fb:a(hb.relative);var kb=jb.offset();db.offset({left:ib.left-kb.left,top:ib.top-kb.top})}if(hb.obstacleSelector&&_.type=="collision"){F=new d(n,eb,fb,n,db);m(eb,u,n,F,g)}if(hb.restraintSelector&&_.type=="protrusion"){F=new d(q,eb,fb,q,db);m(eb,u,q,F,g)}}}for(var y=0;y<w.length;y++){if(w[y].obstacleSelector){F=new e(p,a(this),w[y].obstacle,n);m(w[y].collider,u,p,F,g)}if(w[y].restraintSelector){F=new e(t,a(this),w[y].restraint,q);m(w[y].collider,u,t,F,g)}}a(this).data("jquery-ui-draggable-collision-recent-position",g.position)}function r(d,e,f){var g=d.concat(e).sort(k);if(c){if(!f.deltanum){f.deltanum=1}}if(b){console.log("collisions, in order: ",g.map(function(a,b,c){return a.collisionCoords.hash()}).join(","))}while(g.length>0){var h=g.pop();var i=h.obstacleCoords;var j=h.colliderCoords;var l=h.collisionCoords;var m=h.type;var n=h.direction;var o=h.hash();var p=h.type=="protrusion"?j.centerx()>i.centerx()?-1:+1:j.centerx()>i.centerx()?+1:-1;var q=h.type=="protrusion"?j.centery()>i.centery()?-1:+1:j.centery()>i.centery()?+1:-1;var r=h.embedx(p);var s=h.embedy(q);if(b)console.log("cv,cc,co,ct,dx,dy,thisc.dx,thisc.dy,dirx,diry,co.centerx,co.centery,cc.centerx,cc.centery,key=",l.hash(),j.hash(),i.hash(),m,r,s,h.dx,h.dy,p,q,i.centerx(),i.centery(),j.centerx(),j.centery(),o);var t=r<s;if(o in f&&f[o]=="tried reverse"){if(b)console.log("but already tried reverse too...");continue}else if(o in f&&f[o]=="tried normal"){if(b)console.log("but already tried this...");t=!t;f[o]="tried reverse"}else{f[o]="tried normal"}if(t){if(c){a("<span>"+h.direction+"d"+f.deltanum+".dx="+r+"*"+p+"</span>").css("color","black").addClass("testdebug").css("position","absolute").css("white-space","nowrap").offset({left:h.mousex,top:h.mousey+20*(f.deltanum-1)}).appendTo("body");f.deltanum++}if(r<=0){g.push(h);continue}return{dx:r*p,dy:0}}else{if(c){a("<span>"+h.direction+"d"+f.deltanum+".dy="+s+"*"+q+"</span>").css("color","black").addClass("testdebug").css("position","absolute").css("white-space","nowrap").offset({left:h.mousex,top:h.mousey+20*(f.deltanum-1)}).appendTo("body");f.deltanum++}if(s<=0){g.push(h);continue}return{dx:0,dy:s*q}}}return{dx:0,dy:0}}var b=false;var c=b;a.ui.draggable.prototype.options.obstacle=".ui-draggable-collision-obstacle";a.ui.draggable.prototype.options.restraint=".ui-draggable-collision-restraint";a.ui.draggable.prototype.options.collider=".ui-draggable-dragging";a.ui.draggable.prototype.options.colliderData=null;a.ui.draggable.prototype.options.obstacleData=null;a.ui.draggable.prototype.options.directionData=null;a.ui.draggable.prototype.options.relative="body";a.ui.draggable.prototype.options.preventCollision=false;a.ui.draggable.prototype.options.preventProtrusion=false;a.ui.draggable.prototype.options.collisionVisualDebug=false;a.ui.draggable.prototype.options.multipleCollisionInteractions=[];a.ui.plugin.add("draggable","obstacle",{create:function(a,b){n.call(this,a,b)},start:function(a,b){o.call(this,a,b)},drag:function(a,b){return q.call(this,a,b)},stop:function(a,b){q.call(this,a,b);p.call(this,a,b)}});a.ui.plugin.add("draggable","restraint",{create:function(a,b){n.call(this,a,b)},start:function(b,c){if(!a(this).data("draggable").options.obstacle){o.call(this,b,c)}},drag:function(b,c){if(!a(this).data("draggable").options.obstacle){return q.call(this,b,c)}},stop:function(b,c){if(!a(this).data("draggable").options.obstacle){q.call(this,b,c);p.call(this,b,c)}}});a.ui.plugin.add("draggable","multipleCollisionInteractions",{create:function(a,b){n.call(this,a,b)},start:function(b,c){if(!a(this).data("draggable").options.obstacle&&!a(this).data("draggable").options.restraint){o.call(this,b,c)}},drag:function(b,c){if(!a(this).data("draggable").options.obstacle&&!a(this).data("draggable").options.restraint){return q.call(this,b,c)}},stop:function(b,c){if(!a(this).data("draggable").options.obstacle&&!a(this).data("draggable").options.restraint){q.call(this,b,c);p.call(this,b,c)}}});d.prototype=new a.Event("");e.prototype=new a.Event("");f.prototype.width=function(){return this.x2-this.x1};f.prototype.height=function(){return this.y2+this.y1};f.prototype.centerx=function(){return(this.x1+this.x2)/2};f.prototype.centery=function(){return(this.y1+this.y2)/2};f.prototype.area=function(){return this.width()*this.height()};f.prototype.hash=function(){return"["+[this.x1,this.y1,this.x2,this.y2].join(",")+"]"};f.prototype.distance=function(a){return this.distanceTo(a.centerx(),a.centery())};f.prototype.distanceTo=function(a,b){var c=this.centerx()-a;var d=this.centerx()-b;return Math.sqrt(c*c+d*d)};j.prototype.embedx=function(a){if(this.type=="collision"){if(a<0)return this.colliderCoords.x2-this.obstacleCoords.x1;if(a>0)return this.obstacleCoords.x2-this.colliderCoords.x1}else if(this.type=="protrusion"){if(this.direction=="N"||this.direction=="S")return 0;if(a<0)return this.colliderCoords.x2-this.obstacleCoords.x2;if(a>0)return this.obstacleCoords.x1-this.colliderCoords.x1}return 0};j.prototype.embedy=function(a){if(this.type=="collision"){if(a<0)return this.colliderCoords.y2-this.obstacleCoords.y1;if(a>0)return this.obstacleCoords.y2-this.colliderCoords.y1}else if(this.type=="protrusion"){if(this.direction=="E"||this.direction=="W")return 0;if(a<0)return this.colliderCoords.y2-this.obstacleCoords.y2;if(a>0)return this.obstacleCoords.y1-this.colliderCoords.y1}return 0};j.prototype.distance=function(){var a=this.centerOfMass.centerx();var b=this.centerOfMass.centery();var c=this.collisionCoords.centerx();var d=this.collisionCoords.centery();return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))};j.prototype.hash=function(){return this.type+"["+this.colliderCoords.hash()+","+this.obstacleCoords.hash()+"]"};})(jQuery)